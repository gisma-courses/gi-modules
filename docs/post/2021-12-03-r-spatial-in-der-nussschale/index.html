<!DOCTYPE html>
<html lang="en-us^">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <meta property="og:site_name" content="gi-modules">
    <meta property="og:type" content="article">

    
    <meta property="og:image" content="https://gisma-courses.github.io/gi-modules///assets/images/final2-sp.jpg">
    <meta property="twitter:image" content="https://gisma-courses.github.io/gi-modules///assets/images/final2-sp.jpg" />
    

    
    <meta name="title" content="R-Spatial in der Nussschale" />
    <meta property="og:title" content="R-Spatial in der Nussschale" />
    <meta property="twitter:title" content="R-Spatial in der Nussschale" />
    

    
    <meta name="description" content="">
    <meta property="og:description" content="" />
    <meta property="twitter:description" content="" />
    

    
    <meta property="twitter:card" content="summary" />
    
    
    
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"></script>
<link rel="stylesheet" href="/gi-modules/css/hugo-cite.css" />
<link rel="stylesheet" href="https://gisma-courses.github.io/gi-modules/css/stackoverflow-light.min.css" rel="stylesheet" id="theme-stylesheet">
<script src="https://gisma-courses.github.io/gi-modules/js/highlight.min.js"></script>
<script>hljs.highlightAll();</script>

    <meta name="keyword"  content="gisma">
    <link rel="shortcut icon" href="/gi-modules/img/favicon.ico">

    <title>R-Spatial in der Nussschale-your title</title>

    <link rel="canonical" href="/gi-modules/gi-modules/post/2021-12-03-r-spatial-in-der-nussschale/">
    

  <script src="https://unpkg.com/boxicons@2.0.9/dist/boxicons.js"></script>
    
    <link href="https://gisma-courses.github.io/gi-modules/css/boxes.css" rel="stylesheet">

    <link rel="stylesheet" href="/gi-modules/css/iDisqus.min.css"/>

    
    <link rel="stylesheet" href="/gi-modules/css/bootstrap.min.css">

    
    <link rel="stylesheet" href="/gi-modules/css/hugo-theme-cleanwhite.min.css">

    
    <link rel="stylesheet" href="/gi-modules/css/zanshang.css">

    
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" rel="stylesheet" type="text/css">

    
    

    
    
    <script src="/gi-modules/js/jquery.min.js"></script>

    
    <script src="/gi-modules/js/bootstrap.min.js"></script>

    
    <script src="/gi-modules/js/hux-blog.min.js"></script>

    
    

</head>




<nav class="navbar navbar-default navbar-custom navbar-fixed-top">

    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/gi-modules/"> HOME </a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                   
                    
                        
                        <li>
                            <a href="/gi-modules/categories/agis">agis</a>
                        </li>
                        
                        <li>
                            <a href="/gi-modules/categories/basics">basics</a>
                        </li>
                        
                    
                    
		    
                        <li><a href="/gi-modules/top/archive/">CONTENT</a></li>
                    

                    
                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    
    
    
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        
            $navbar.className = " ";
            
            setTimeout(function(){
                
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>




<style type="text/css">
    header.intro-header {
        background-image: url('/gi-modules/assets/images/final2-sp.jpg');
  max-height: 350px
    }
</style>

<header class="intro-header" >

    <div class="container">
        <div class="row">
            <div class="col-lg-0 col-lg-offset-0 col-md-0 col-md-offset-0">
                <div class="post-heading">
                   
                    <h1>R-Spatial in der Nussschale</h1>
                   
            
                            
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>




<article>
    <div class="container">
        <div class="row">

            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                
                <h2 id="vektordaten">Vektordaten</h2>
<p>Natürlich können in <code>R</code> auch Vektordaten verarbeitet werden. Das Paket, <code>sf</code> ist da Arbeitspferd um Vektordaten vieler Typen zu lesen, schreiben und analysieren. FürÜbungszwecke werden wir einige Daten aus der <a href="https://www.openstreetmap.de/">Openstreetmap</a> (OSM) Datenbank herunterladen. Einen Überblick über die verfügbaren <a href="https://wiki.openstreetmap.org/wiki/Map_features">Features</a> finden sie unter dem Link.
Mit dem folgenden R-Quellcode laden und visualisieren wir die Gebäude im Verwaltungsbereich Marburg:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#75715e"># Example Polygons</span>
<span style="color:#75715e"># OSM public data buildings marburg</span>
<span style="color:#75715e"># do not forget to add the osmdata package to your header section of the script</span>

<span style="color:#a6e22e">library</span>(osmdata)
<span style="color:#75715e"># loading OSM data for the Marburg region </span>
buildings <span style="color:#f92672">=</span> <span style="color:#a6e22e">opq</span>(bbox <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;marburg de&#34;</span>) <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">add_osm_feature</span>(key <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;building&#34;</span>) <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">osmdata_sf</span>()

buildings <span style="color:#f92672">=</span> buildings<span style="color:#f92672">$</span>osm_polygons

mapview<span style="color:#f92672">::</span><span style="color:#a6e22e">mapview</span>(buildings)
</code></pre></div><h2 id="sentinel-satellitendaten">Sentinel-Satellitendaten</h2>
<p>Satellitendaten hingegen sind mittlerweile prinzipiell leicht zugänglich. Ein Beispiel für solche Satellitendaten, die häufig in der Umwelt-Fernerkundung verwendet werden, ist die [Sentinel-2-Mission] (<a href="https://sentinel.esa.int/web/sentinel/missions/sentinel-2">https://sentinel.esa.int/web/sentinel/missions/sentinel-2</a>) der Europäischen Weltraumorganisation.</p>
<h3 id="das-paket-sen2r">Das Paket <code>sen2r</code></h3>
<p>Mit dem Paket <code>sen2r</code> können Sie Sentinel-2-Bilder direkt in <code>R</code> herunterladen und vorverarbeiten.</p>
<p>Um <code>sen2r</code> zu installieren, müssen Sie <code>Rtools</code> installiert haben.</p>
<ol>
<li>Gehe zu <a href="http://cran.r-project.org/bin/windows/Rtools/">http://cran.r-project.org/bin/windows/Rtools/</a></li>
<li>Wählen Sie den Download-Link, der Ihrer Version von <code>R</code> entspricht</li>
<li>Öffnen Sie die .exe-Datei und verwenden Sie die Standardeinstellungen</li>
<li><strong>Vergewissern Sie sich, dass Sie das Kästchen ankreuzen, damit das Installationsprogramm Ihren PATH bearbeiten kann</strong></li>
<li>Führen Sie <code>library(devtools)</code> in <code>R</code> aus</li>
<li>Führen Sie <code>find_rtools()</code> aus &ndash; wenn <code>TRUE</code>, hat die Installation richtig funktioniert</li>
</ol>
<p>Dann muss das Paket nur noch wie jedes andere Paket installiert werden.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#34;sen2r&#34;</span>)
<span style="color:#a6e22e">library</span>(sen2r)
</code></pre></div><h3 id="die-sen2r-gui">Die <code>sen2r</code>-GUI</h3>
<p>Der einfachste Weg, <code>sen2r</code> zu benutzen, ist, die grafische Benutzeroberfläche (GUI) zu öffnen und sie im interaktiven Modus zu benutzen. Allerdings muss man hier in den Einstellungen aus einer Vielzahl von Optionen wählen. Die dafür erforderlichen Kenntnisse sind auch für die unten vorgestellte Kommandozeilenversion notwendig. Beide Schnittstellen können automatisiert werden. Wir empfehlen die API, aber letztlich bleibt es Ihnen überlassen. Verwenden Sie dazu die gleichnamige Funktion.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">sen2r<span style="color:#f92672">::</span><span style="color:#a6e22e">sen2r</span>()
</code></pre></div><h3 id="die-sen2r-api">Die <code>sen2r</code> API</h3>
<p>Damit Sie Sentinel Daten benutzen können müssen Sie bei SciHub ein <a href="https://scihub.copernicus.eu/dhus/#/self-registration">Konto anlegen</a>!</p>
<p>Im folgenden Skript werden die Sentinel-2-Daten zur Berechnung der Oberflächenalbedo verwendet. Dazu sind die folgenden Schritte notwendig:</p>
<ol>
<li>Festlegen einger Parameter wie z.B. Datum Bildausschnitt usw.</li>
<li>Herunterladen der Daten durch Konfigurieren und Ausführen von <code>sen2r</code> über die API</li>
<li>Berechnen Sie die Oberflächenalbedo (beispielhaft)</li>
</ol>
<script src="https://gist.github.com/gisma/5a11edd28cf81cee523e273b0064bcea.js"></script>
<p>Die <a href="https://sen2r.ranghetti.info/">sen2r vignette</a> bietet viele hilfreiche Informationen über die Benutzung der GUI und den Zugriff auf die Funktionen von <code>sen2r</code> aus <code>R</code> heraus.</p>
<h4 id="raster-daten">Raster Daten</h4>
<p>Konkret verwenden wir die Funktion <code>stack</code> aus dem Paket <code>raster</code>, um eine sog. Geo-TIF-Datei zu importieren. Also ein <em>Rasterbild</em> mit räumlichen Eigenschaften wie einer Georeferenzierung. Durch die Verwendung der <code>::</code>-Syntax, d.h. <code>Paket::Funktion</code>, garantieren wir, dass wir eine bestimmte Funktion aus einem bestimmten Paket verwenden. Dieses Konzept ist wichtig, um sicherzustellen, dass wir die richtige Funktion verwenden (da einige Pakete die gleichen Funktionsnamen verwenden, was als Maskierung bezeichnet wird).</p>

                <style>
.button {
  border: none;
  border-radius: 4px 4px; 
  color: white;
  padding: 2px 4px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 12px;
  transition-duration: 0.5s;
  cursor: pointer;
  background-color: #4CAF50; 
  
}
.button1 a:link {
  color: #FFF;
  border-radius: 4px 4px;        
  background-color: #4CAF50; 
  
}

.button1 a:visited {
  color: white;
    border-radius: 4px 4px;        
  background-color: #4CAF50; 
  
}

.button1 a:hover {
  color: white;
    padding: 2px 4px;
    border-radius: 4px 4px;        
  background-color: #3FA043; 
  
}

.button1 a:active {
  color: white;
    border-radius: 4px 4px;        
  background-color: #4CAF50; 
  
}
}

.button1 {
  color: white;
  border-radius: 4px 4px;        
  background-color: #4CAF50; 
  
}


.button1:hover {
  background-color: #4CAF60;
    box-shadow:0 8px 16px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19)
}

</style>


<div class="col-12 col-lg-10ish article-style">     
<p>Questions and mistakes but also suggestions and solutions are welcome.</p>
<script src="https://utteranc.es/client.js"
        repo="gisma-courses/gi-modules"
        issue-term="title"
        label="comments"
        theme="github-light"
        crossorigin="anonymous" 
        async>
</script>
<p>Due to an occasionally faulty page redirection, a 404 error may occur. please use the alternative <button class="button button1"> <a href="https://api.utteranc.es/authorize?redirect_uri=https%3a%2f%2fgisma-courses.github.io%2fgi-modules%2fpost%2f2021-12-03-r-spatial-in-der-nussschale%2f">Sign in with GitHub</a></button></p>
    
</div>

                
                
                <hr>
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/gi-modules/post/2021-11-16-getting-startet-with-lidar/" data-toggle="tooltip" data-placement="top" title="Getting startet with LiDAR">&larr;
                            Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/gi-modules/post/2021-11-13-project-oriented-workflow/" data-toggle="tooltip" data-placement="top" title="Project-Oriented Workflow">Next
                            Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>

            
            
            <div class="
                col-lg-2 col-lg-offset-0
                visible-lg-block
                sidebar-container
                catalog-container">
                <div class="side-catalog">
                    <hr class="hidden-sm hidden-xs">
                    <h5>
                        <a class="catalog-toggle" href="#">Content</a>
                    </h5>
                    <ul class="catalog-body"></ul>
                </div>
            </div>
            
            
            

            
            <div class="
                col-lg-2 col-lg-offset-0
                col-md-3 col-md-offset-1
                sidebar-container
                catalog-container">

                
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">Tag Nav</a></h5>
                    <div class="tags">
                        
                        
                        
                        <a href="/gi-modules/tags/basics" title="basics">
                            basics
                        </a>
                        
                        
                        
                        <a href="/gi-modules/tags/ecology" title="ecology">
                            ecology
                        </a>
                        
                        
                        
                        <a href="/gi-modules/tags/forest" title="forest">
                            forest
                        </a>
                        
                        
                        
                        <a href="/gi-modules/tags/forestry" title="forestry">
                            forestry
                        </a>
                        
                        
                        
                        <a href="/gi-modules/tags/lidar" title="lidar">
                            lidar
                        </a>
                        
                        
                        
                        <a href="/gi-modules/tags/project-management" title="project-management">
                            project-management
                        </a>
                        
                        
                        
                        <a href="/gi-modules/tags/reproducibility" title="reproducibility">
                            reproducibility
                        </a>
                        
                        
                        
                        <a href="/gi-modules/tags/resources" title="resources">
                            resources
                        </a>
                        
                        
                        
                        <a href="/gi-modules/tags/rmarkdown" title="rmarkdown">
                            rmarkdown
                        </a>
                        
                        
                        
                        <a href="/gi-modules/tags/scidoc" title="scidoc">
                            scidoc
                        </a>
                        
                        
                        
                        <a href="/gi-modules/tags/scripts" title="scripts">
                            scripts
                        </a>
                        
                        
                    </div>
                </section>
                 

                
                
                      
            </div>
        </div>
    </div>
</article>




<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                   
                    

                    
                    
                    

                    

		    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
            
            
            
                </ul>
		<p class="copyright text-muted">
                    Copyright &copy; gi-modules 2021
                    <br>
                    <a href="https://themes.gohugo.io/hugo-theme-cleanwhite">CleanWhite Hugo Theme</a> by <a href="https://zhaohuabing.com">Huabing</a> 
                </p>
            </div>
        </div>
    </div>
</footer>




<script>
    function loadAsync(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if($('#tag_cloud').length !== 0){
        loadAsync("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script>
    loadAsync("https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>









<script type="text/javascript">
    function generateCatalog(selector) {

        
        
        
        
            _containerSelector = 'div.post-container'
        

        
        var P = $(_containerSelector), a, n, t, l, i, c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        
        $(selector).html('')

        
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#" + $(this).prop('id');
            t = $(this).text();
            c = $('<a href="' + i + '" rel="nofollow">' + t + '</a>');
            l = $('<li class="' + n + '_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");

    
    $(".catalog-toggle").click((function (e) {
        e.preventDefault();
        $('.side-catalog').toggleClass("fold")
    }))

    


    loadAsync("\/gi-modules\/js\/jquery.nav.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>


</body>
</html>
