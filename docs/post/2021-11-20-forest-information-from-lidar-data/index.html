<!DOCTYPE html>
<html lang="en-us^">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <meta property="og:site_name" content="gi-modules">
    <meta property="og:type" content="article">

    
    <meta property="og:image" content="https://gisma-courses.github.io/gi-modules///assets/images/final2-sp.jpg">
    <meta property="twitter:image" content="https://gisma-courses.github.io/gi-modules///assets/images/final2-sp.jpg" />
    

    
    <meta name="title" content="Forest Information from LiDAR data" />
    <meta property="og:title" content="Forest Information from LiDAR data" />
    <meta property="twitter:title" content="Forest Information from LiDAR data" />
    

    
    <meta name="description" content="">
    <meta property="og:description" content="" />
    <meta property="twitter:description" content="" />
    

    
    <meta property="twitter:card" content="summary" />
    
    
    
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"></script>
<link rel="stylesheet" href="/gi-modules/css/hugo-cite.css" />
<link rel="stylesheet" href="https://gisma-courses.github.io/gi-modules/css/stackoverflow-light.min.css" rel="stylesheet" id="theme-stylesheet">
<script src="https://gisma-courses.github.io/gi-modules/js/highlight.min.js"></script>
<script>hljs.highlightAll();</script>

    <meta name="keyword"  content="gisma">
    <link rel="shortcut icon" href="/gi-modules/img/favicon.ico">

    <title>Forest Information from LiDAR data-your title</title>

    <link rel="canonical" href="/gi-modules/gi-modules/post/2021-11-20-forest-information-from-lidar-data/">
    

  <script src="https://unpkg.com/boxicons@2.0.9/dist/boxicons.js"></script>
    
    <link href="https://gisma-courses.github.io/gi-modules/css/boxes.css" rel="stylesheet">

    <link rel="stylesheet" href="/gi-modules/css/iDisqus.min.css"/>

    
    <link rel="stylesheet" href="/gi-modules/css/bootstrap.min.css">

    
    <link rel="stylesheet" href="/gi-modules/css/hugo-theme-cleanwhite.min.css">

    
    <link rel="stylesheet" href="/gi-modules/css/zanshang.css">

    
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" rel="stylesheet" type="text/css">

    
    

    
    
    <script src="/gi-modules/js/jquery.min.js"></script>

    
    <script src="/gi-modules/js/bootstrap.min.js"></script>

    
    <script src="/gi-modules/js/hux-blog.min.js"></script>

    
    

</head>




<nav class="navbar navbar-default navbar-custom navbar-fixed-top">

    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/gi-modules/"> HOME </a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                   
                    
                        
                        <li>
                            <a href="/gi-modules/categories/agis">agis</a>
                        </li>
                        
                        <li>
                            <a href="/gi-modules/categories/legal">legal</a>
                        </li>
                        
                    
                    
		    
                        <li><a href="/gi-modules/top/archive/">CONTENT</a></li>
                    

                    
                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    
    
    
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        
            $navbar.className = " ";
            
            setTimeout(function(){
                
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>




<style type="text/css">
    header.intro-header {
        background-image: url('/gi-modules/assets/images/forest-sp.jpg');
  max-height: 350px
    }
</style>

<header class="intro-header" >

    <div class="container">
        <div class="row">
            <div class="col-lg-0 col-lg-offset-0 col-md-0 col-md-offset-0">
                <div class="post-heading">
                   
                    <h1>Forest Information from LiDAR data</h1>
                   
            
                            
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>




<article>
    <div class="container">
        <div class="row">

            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                
                <h2 id="how-to-get-started">How to get started?</h2>
<p>For this first example we take a typical situation:</p>
<ul>
<li>we have no idea about the software and possible solutions</li>
<li>we have no idea about LiDAR data processing and analysis</li>
<li>we just google something like <em>lidR package tutorial</em></li>
</ul>
<p>Among the top ten is <a href="https://jean-romain.github.io/lidRbook/">The lidR package book</a> . So let’s follow the white rabbit…</p>
<h2 id="creating-a-canopy-height-model-chm-reloaded">Creating a Canopy Height Model (CHM) reloaded</h2>
<p>After successful application of the tutorial we will transfer it into a suitable script for our workflow. Please check the comments for better understanding and do it <strong>step by step!</strong> again. Please note that the following script is meant to be an basic example how:</p>
<ul>
<li>to organize scripts in common</li>
<li>with a hands on example for creating a canopy height model.</li>
</ul>
<p>After revisiting the tutorial is seems to be a good choice to follow the tutorial of the <code>lidR</code> developer that is <a href="https://jean-romain.github.io/lidRbook/chm.html">Digital Surface Model and Canopy Height model</a> in the above tutorial. Why? because for the first Jean-Romain Roussel explains 6 ways how to create in a very simple approach a CHM, second to show up that it makes sense to read and third to loop back because it does not work with bigger files. Let us start with the new script structure.</p>
<script src="https://gist.github.com/gisma/89881e23f5c2da91d161a9668386b715.js"></script>
<style>
div.b {
  text-align: center;
  align: center;
}
figure {
  border: 0px solid red;

}
iframe {
  top: 0;
  overflow: auto;

}
figcaption {
  padding-right: 50px;
  padding-left: 50px;
  font-family: Tahoma, Verdana, sans-serif;
  font-style: italic;
  bottom: 0;
  text-align: justify;
  font-size: 13px;
  width: 700;
  border: 0px solid blue;
}
</style>
<div class="b">
<figure >
<iframe src="/gi-modules/assets/misc/chm_one_tile.html" width="700" height="680" frameborder="0" allowfullscreen="allowfullscreen" allow="geolocation *; microphone *; camera *; midi *; encrypted-media *" ></iframe>
<figcaption>Canopy Height Model map</figcaption>
</figure>
</div>
<h3 id="lidr-catalog---coping-with-computer-memory-resources">lidR catalog - coping with computer memory resources</h3>
<p>The above example is based on a las-tile of 250 by 250 meter. That means a fairly <strong>small</strong> tile size. If you did not run in memory or CPU problems you can deal with these tiles by simple looping.</p>
<p><strong>But</strong> you have to keep in mind that even if a tile based processing can easily be handled with loops but has some pitfalls. E.g. if you compute some focal operations, you have to make sure that if the filter is close to the boundary of the tile that data from the neighboring tile is loaded in addition. Also the tile size may be a problem for your memory availability.</p>
<p>The <code>lidR</code> package comes with a feature called catalog and a set of catalog functions which make tile-based life easier. A catalog meta object also holds information on e.g. the cartographic reference system of the data or the cores used for parallel processing. So we start over again - this time with a <strong>real</strong> data set.</p>
<p>If not already done download the course related <a href="http://gofile.me/3Z8AJ/c6m5CfvWZ">LiDAR data set of the MOF area</a> . Store the the data to the <strong><code>envrmt$path_l_raw</code></strong> folder.</p>
<p>Please note that dealing with <code>lidR</code> catalogs is pretty stressful for the memory administration of your <code>rsession</code>. So best practices is to <strong>Restart your Rsesseion and clean up your environment</strong>. This will help you to avoid frustrating situation like restarting your PC after hours of waiting…</p>
<p>Take the setup section of the above script and exchange the code part as found under <em>#— start script</em> with the following code chunk. This will setup a lidR catalog and a more sophisticated approach to calculate the DEM, DSM and CHM.</p>
<script src="https://gist.github.com/gisma/4172ef049b116abb1454233c8950d587.js"></script>
<h3 id="the-visualization-of-an-operating-lidr-catalog-action">The visualization of an operating lidR catalog action.</h3>
<p>The <code>mof_ctg</code> catalog is shows the extent of the original las file as provided by the the data server. The vector that is visualized is the resulting <code>lidR</code> catalog containing all extracted parameters. Same with the <code>mof100_ctg</code> here you see the extracted maximum Altitude of each tile used for visualization. Feel free to investigate the catalog parameters by clicking on the tiles.</p>
<style>
div.b {
  text-align: center;
  align: center;
}
figure {
  border: 0px solid red;

}
iframe {
  top: 0;
  overflow: auto;

}
figcaption {
  padding-right: 50px;
  padding-left: 50px;
  font-family: Tahoma, Verdana, sans-serif;
  font-style: italic;
  bottom: 0;
  text-align: justify;
  font-size: 13px;
  width: 700;
  border: 0px solid blue;
}
</style>
<div class="b">
<figure >
<iframe src="/gi-modules/assets/misc/mof_sapflow_chm.html" width="700" height="680" frameborder="0" allowfullscreen="allowfullscreen" allow="geolocation *; microphone *; camera *; midi *; encrypted-media *" ></iframe>
<figcaption>Canopy Height Model map</figcaption>
</figure>
</div>
<h3 id="the-whole-clipped-mof-area-rendered-to-a-canopy-height-model">The whole clipped MOF area rendered to a canopy height model.</h3>
<style>
div.b {
  text-align: center;
  align: center;
}
figure {
  border: 0px solid red;

}
iframe {
  top: 0;
  overflow: auto;

}
figcaption {
  padding-right: 50px;
  padding-left: 50px;
  font-family: Tahoma, Verdana, sans-serif;
  font-style: italic;
  bottom: 0;
  text-align: justify;
  font-size: 13px;
  width: 700;
  border: 0px solid blue;
}
</style>
<div class="b">
<figure >
<iframe src="/gi-modules/assets/misc/chm_one_tile.html" width="700" height="680" frameborder="0" allowfullscreen="allowfullscreen" allow="geolocation *; microphone *; camera *; midi *; encrypted-media *" ></iframe>
<figcaption>Canopy Height Model map</figcaption>
</figure>
</div>
<p>Assuming the above script (or the script you have adapted) runs without any technical errors, the exciting part of the data preprocessing comes now. In addition we ave to cross check and answer a lot of questions:</p>
<ul>
<li>Which algorithms did I use and why?</li>
<li>45m high trees - does that make sense?</li>
<li>If not why not?</li>
<li>What correction options do I have and why?</li>
<li>Is the error due to the data, the algorithms, the script or all together?</li>
<li>…</li>
</ul>
<h2 id="where-to-go">Where to go?</h2>
<p>To answer this questions we need a two folded approach.</p>
<ul>
<li>First we need technically to strip down the script to a <em>real</em> control script, all functionality that is used more than once will be moved into <em>functions</em> or other static scripts.</li>
<li>Second from a scientific point of view we need to find out what algorithm is most suitable and reliable to answer the question of calculating a set of paramters for deriving structural forest index classes. This also includes that we have to decide which classes and why… .</li>
</ul>
<h2 id="ressources">Ressources</h2>
<ul>
<li>You find all related materials at the <a href="https://gisma-courses.github.io/gi-modules/post/2021-11-16-agis-ressourcen/">aGIS Ressource</a> post.</li>
</ul>
<h2 id="comments--suggestions">Comments &amp; Suggestions</h2>

                <style>
.button {
  border: none;
  border-radius: 4px 4px; 
  color: white;
  padding: 2px 4px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 12px;
  transition-duration: 0.5s;
  cursor: pointer;
  background-color: #4CAF50; 
  
}
.button1 a:link {
  color: #FFF;
  border-radius: 4px 4px;        
  background-color: #4CAF50; 
  
}

.button1 a:visited {
  color: white;
    border-radius: 4px 4px;        
  background-color: #4CAF50; 
  
}

.button1 a:hover {
  color: white;
    padding: 2px 4px;
    border-radius: 4px 4px;        
  background-color: #3FA043; 
  
}

.button1 a:active {
  color: white;
    border-radius: 4px 4px;        
  background-color: #4CAF50; 
  
}
}

.button1 {
  color: white;
  border-radius: 4px 4px;        
  background-color: #4CAF50; 
  
}


.button1:hover {
  background-color: #4CAF60;
    box-shadow:0 8px 16px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19)
}

</style>


<div class="col-12 col-lg-10ish article-style">     
<p>Questions and mistakes but also suggestions and solutions are welcome.</p>
<script src="https://utteranc.es/client.js"
        repo="gisma-courses/gi-modules"
        issue-term="title"
        label="comments"
        theme="github-light"
        crossorigin="anonymous" 
        async>
</script>
<p>Due to an occasionally faulty page redirection, a 404 error may occur. please use the alternative <button class="button button1"> <a href="https://api.utteranc.es/authorize?redirect_uri=https%3a%2f%2fgisma-courses.github.io%2fgi-modules%2fpost%2f2021-11-20-forest-information-from-lidar-data%2f">Sign in with GitHub</a></button>.</p>
    
</div>

                
                
                <hr>
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/gi-modules/post/2021-11-16-agis-ressourcen/" data-toggle="tooltip" data-placement="top" title="aGIS Ressources">&larr;
                            Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/gi-modules/post/2021-11-16-getting-startet-with-lidar/" data-toggle="tooltip" data-placement="top" title="Getting startet with LiDAR">Next
                            Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>

            
            
            <div class="
                col-lg-2 col-lg-offset-0
                visible-lg-block
                sidebar-container
                catalog-container">
                <div class="side-catalog">
                    <hr class="hidden-sm hidden-xs">
                    <h5>
                        <a class="catalog-toggle" href="#">Content</a>
                    </h5>
                    <ul class="catalog-body"></ul>
                </div>
            </div>
            
            
            

            
            <div class="
                col-lg-2 col-lg-offset-0
                col-md-3 col-md-offset-1
                sidebar-container
                catalog-container">

                
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">Tag Nav</a></h5>
                    <div class="tags">
                        
                        
                        
                        <a href="/gi-modules/tags/basics" title="basics">
                            basics
                        </a>
                        
                        
                        
                        <a href="/gi-modules/tags/ecology" title="ecology">
                            ecology
                        </a>
                        
                        
                        
                        <a href="/gi-modules/tags/forest" title="forest">
                            forest
                        </a>
                        
                        
                        
                        <a href="/gi-modules/tags/forestry" title="forestry">
                            forestry
                        </a>
                        
                        
                        
                        <a href="/gi-modules/tags/lidar" title="lidar">
                            lidar
                        </a>
                        
                        
                        
                        <a href="/gi-modules/tags/project-management" title="project-management">
                            project-management
                        </a>
                        
                        
                        
                        <a href="/gi-modules/tags/reproducibility" title="reproducibility">
                            reproducibility
                        </a>
                        
                        
                        
                        <a href="/gi-modules/tags/resources" title="resources">
                            resources
                        </a>
                        
                        
                        
                        <a href="/gi-modules/tags/scidoc" title="scidoc">
                            scidoc
                        </a>
                        
                        
                        
                        <a href="/gi-modules/tags/scripts" title="scripts">
                            scripts
                        </a>
                        
                        
                    </div>
                </section>
                 

                
                
                      
            </div>
        </div>
    </div>
</article>




<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                   
                   <li>
                       <a href='' rel="alternate" type="application/rss+xml" title="gi-modules" >
                           <span class="fa-stack fa-lg">
                               <i class="fas fa-circle fa-stack-2x"></i>
                               <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
                           </span>
                       </a>
                   </li>
                   
                    
                    <li>
                        <a href="mailto:creuden@gmail.com">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    

                    
                    
                    

                    

		    
                    
                    
                    <li>
                        <a target="_blank" href="https://github.com/gisma">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    
                    
                    
                    
                    
            
            
            
                </ul>
		<p class="copyright text-muted">
                    Copyright &copy; gi-modules 2021
                    <br>
                    <a href="https://themes.gohugo.io/hugo-theme-cleanwhite">CleanWhite Hugo Theme</a> by <a href="https://zhaohuabing.com">Huabing</a> 
                </p>
            </div>
        </div>
    </div>
</footer>




<script>
    function loadAsync(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if($('#tag_cloud').length !== 0){
        loadAsync("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script>
    loadAsync("https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>









<script type="text/javascript">
    function generateCatalog(selector) {

        
        
        
        
            _containerSelector = 'div.post-container'
        

        
        var P = $(_containerSelector), a, n, t, l, i, c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        
        $(selector).html('')

        
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#" + $(this).prop('id');
            t = $(this).text();
            c = $('<a href="' + i + '" rel="nofollow">' + t + '</a>');
            l = $('<li class="' + n + '_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");

    
    $(".catalog-toggle").click((function (e) {
        e.preventDefault();
        $('.side-catalog').toggleClass("fold")
    }))

    


    loadAsync("\/gi-modules\/js\/jquery.nav.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>


</body>
</html>
